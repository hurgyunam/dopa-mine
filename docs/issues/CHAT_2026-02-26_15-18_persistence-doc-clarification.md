# Chat Log - 2026-02-26 15:18 - Persistence Doc Clarification

## 왜 기록하나
- 저장 계층 설계 문서를 실제 개발 난이도에 맞춰 단순화하고, 용어 오해 지점을 명확히 분리해 남기기 위함.
- 멱등성 키/예외 클래스/오프라인 큐 우선순위에 대한 판단 근거를 이후 구현 시 재사용하기 위함.

## 결정 요약
- 결론: 저장 구현은 `MVP(Dio fetch 온라인 우선)`과 `P3(2차 오프라인 큐)`로 분리하고, `idempotencyKey` 규칙과 예외 처리 의도를 문서에 명시적으로 보강함.
- 이유: 현재 목표는 빠른 기능 완성이며, 오프라인 큐는 복잡도가 높아 별도 단계로 분리하는 것이 리스크/속도 모두에 유리함.

## 제안 출처
### AI 제안
- 저장 계층 문서를 유지하되 MVP 기준으로 단계 분리하고, 멱등성/오류 전파 문구를 이해하기 쉬운 표현으로 정리.
- `session_exercise_id`가 UUID 전역 유일이므로 중복 체크 관점에서 `workout_session_id` 추가는 필수가 아님을 근거와 함께 문서화.

### 사용자 제안
- `1차/2차` 용어를 항목에서 제거하고 우선순위 섹션(`P3`)에만 남기도록 정리.
- 어려운 문장을 쉬운 표현으로 바꾸고, 예외는 별도 `Exception` 클래스로 정의한다는 의도를 문서에 명시.

## 반영
- 변경 문서:
  - `docs/TODO.md`
  - `docs/architecture/04_persistence_design.md`
- 상태: done

## 취합용 요약
- 결론: 저장 작업은 MVP 온라인 우선과 P3 오프라인 큐로 분리했고, 멱등성/예외 처리 문구를 구현 친화적으로 명확화했다.
- AI 제안 핵심: 복잡한 설계 의도를 유지하되 문장 난도를 낮추고, UUID 기반 멱등성 근거와 예외 분류 책임을 문서에 고정하자.
- 사용자 결정 핵심: 우선순위 체계를 P1-MVP와 P3-2차로 재정렬하고, 실제 구현 시 해석 가능한 표현으로 문서를 다듬기로 했다.
